<!DOCTYPE html>
<html lang="fr" prefix="og: https://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skunk Snow ‚ùÑÔ∏èüî• - CBD Street</title>
    
    <!-- Protection Meta -->
    <meta name="robots" content="noindex, nofollow">
    <meta name="referrer" content="no-referrer">
    <meta name="copyright" content="Skunk Snow">
    
    <!-- Meta Tags Open Graph -->
    <meta property="og:title" content="Skunk Snow ‚ùÑÔ∏èüî• - Qualit√© Street">
    <meta property="og:description" content="CBD Premium ‚Ä¢ Livraison Discr√®te ‚Ä¢ Qualit√© Garantie">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://votre-site.com">
    <meta property="og:image" content="https://mcusercontent.com/6ce25ea8296b12e3b67c52a85/images/67b5c8d4-de1c-5b5c-fd7f-e29eb9e491e0.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Skunk Snow ‚ùÑÔ∏èüî•">
    <meta name="twitter:description" content="CBD Premium ‚Ä¢ Livraison Discr√®te">
    <meta name="twitter:image" content="https://mcusercontent.com/6ce25ea8296b12e3b67c52a85/images/67b5c8d4-de1c-5b5c-fd7f-e29eb9e491e0.png">
    
    <style>
        :root {
            --primary-color: #1a1a1a;
            --secondary-color: #333;
            --accent-color: #8a2be2;
            --text-color: #fff;
            --light-gray: #f0f0f0;
            --dark-gray: #444;
            --border-radius: 5px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--primary-color);
            color: var(--text-color);
            line-height: 1.6;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header */
        header {
            background-color: var(--primary-color);
            padding: 1rem 0;
            border-bottom: 2px solid var(--accent-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--accent-color);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-color);
        }

        .logo span {
            color: var(--accent-color);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cart-icon {
            position: relative;
            background: #8a2be2;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .cart-count {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .view-code-btn {
            background: #00c853;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: 600;
            display: none;
        }

        /* Hero Section avec votre image */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://mcusercontent.com/6ce25ea8296b12e3b67c52a85/images/0be800b1-2a27-f6ff-b0ce-fd3b00962846.png');
            background-size: cover;
            background-position: center;
            text-align: center;
            padding: 4rem 1rem;
            margin-bottom: 3rem;
        }

        .hero p:first-child {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
            color: var(--light-gray);
        }

        /* Products Section */
        .products {
            padding: 3rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .section-title span {
            color: var(--accent-color);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--dark-gray);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: var(--accent-color);
        }

        .product-image {
            height: 200px;
            background-color: var(--dark-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
            font-weight: bold;
            font-size: 1.5rem;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-title {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .product-description {
            color: #ccc;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .product-price {
            font-weight: bold;
            color: var(--accent-color);
            font-size: 1.3rem;
            margin-bottom: 1rem;
        }

        .add-to-cart {
            width: 100%;
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem;
            border-radius: var(--border-radius);
            font-weight: 500;
            transition: var(--transition);
            border: none;
            cursor: pointer;
        }

        .add-to-cart:hover {
            background-color: #6a1cb3;
        }

        /* Cart Modal */
        .cart-modal {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background-color: var(--secondary-color);
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .cart-modal.active {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid var(--dark-gray);
        }

        .close-cart {
            background: none;
            font-size: 1.5rem;
            color: var(--text-color);
            border: none;
            cursor: pointer;
        }

        .cart-items {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--dark-gray);
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            background-color: var(--dark-gray);
            border-radius: var(--border-radius);
            margin-right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 500;
            margin-bottom: 0.3rem;
        }

        .cart-item-price {
            color: var(--accent-color);
            font-weight: bold;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
        }

        .quantity-btn {
            width: 25px;
            height: 25px;
            background-color: var(--dark-gray);
            color: var(--text-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            border: none;
            cursor: pointer;
        }

        .quantity-value {
            margin: 0 0.5rem;
        }

        .remove-item {
            color: #ff6b6b;
            margin-left: 1rem;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .cart-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--dark-gray);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .checkout-btn {
            width: 100%;
            background-color: var(--accent-color);
            color: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            font-weight: 500;
            font-size: 1rem;
            transition: var(--transition);
            text-decoration: none;
            display: block;
            text-align: center;
            margin-bottom: 0.5rem;
            border: none;
            cursor: pointer;
        }

        .checkout-btn:hover {
            background-color: #6a1cb3;
        }

        /* Copy Section avec formulaire */
        .copy-section {
            background-color: var(--primary-color);
            padding: 2rem 0;
            text-align: center;
        }

        .copy-box {
            background-color: var(--secondary-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            max-width: 600px;
            margin: 0 auto;
        }

        .client-form {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--dark-gray);
            background-color: var(--primary-color);
            color: var(--text-color);
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent-color);
            background: #333;
        }

        /* Suggestions d'adresse */
        .address-suggestions {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: var(--border-radius);
            margin-top: 5px;
            max-height: 150px;
            overflow-y: auto;
            display: none;
            position: absolute;
            width: calc(100% - 30px);
            z-index: 10;
        }

        .address-suggestion {
            padding: 10px 15px;
            border-bottom: 1px solid #444;
            cursor: pointer;
            transition: var(--transition);
        }

        .address-suggestion:hover {
            background: #8a2be2;
        }

        .address-suggestion:last-child {
            border-bottom: none;
        }

        .distance-info {
            background: #2a2a2a;
            padding: 16px;
            border-radius: var(--border-radius);
            margin: 16px 0;
            border: 1px solid #444;
            display: none;
        }

        .copy-message {
            background: #2a2a2a;
            padding: 16px;
            border-radius: var(--border-radius);
            margin: 16px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #444;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            flex-direction: column;
        }

        .action-btn {
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-weight: 700;
            font-size: 16px;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn:active {
            transform: scale(0.98);
        }

        .generate-btn {
            background: #8a2be2;
            color: white;
        }

        .copy-btn {
            background: #00c853;
            color: white;
            display: none;
        }

        .telegram-btn {
            background: #0088cc;
            color: white;
        }

        /* Security Features */
        .security-features {
            background: #1a1a1a;
            padding: 15px;
            margin: 10px;
            border-radius: 12px;
            border-left: 4px solid #8a2be2;
            font-size: 12px;
            color: #999;
        }

        .security-features ul {
            list-style: none;
            padding: 0;
        }

        .security-features li {
            margin: 5px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Confirmation Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .confirmation-modal {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #8a2be2;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(138, 43, 226, 0.3);
        }

        .confirmation-code-display {
            font-size: 48px;
            font-weight: 900;
            color: #ff4444;
            margin: 20px 0;
            text-shadow: 0 2px 10px rgba(255, 68, 68, 0.3);
        }

        .confirmation-instruction {
            color: #fff;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .close-modal {
            background: #8a2be2;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Footer */
        footer {
            background-color: var(--primary-color);
            padding: 2rem 0;
            text-align: center;
            border-top: 1px solid var(--dark-gray);
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 999;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .cart-modal {
                max-width: 100%;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            .logo-img {
                width: 35px;
                height: 35px;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .product-card {
                margin-bottom: 1rem;
            }
            
            .copy-box {
                padding: 1rem;
            }
            
            .copy-btn, .telegram-btn {
                padding: 1rem;
                font-size: 0.9rem;
            }

            .hero p:first-child {
                font-size: 1.4rem;
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: 2rem 1rem;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .container {
                width: 95%;
            }

            .hero p:first-child {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header avec logo -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <img src="https://mcusercontent.com/6ce25ea8296b12e3b67c52a85/images/67b5c8d4-de1c-5b5c-fd7f-e29eb9e491e0.png" alt="Skunk Snow Logo" class="logo-img">
                    <div class="logo">Skunk <span>Snow</span> ‚ùÑÔ∏èüî•</div>
                </div>
                <div class="header-actions">
                    <button class="view-code-btn" id="viewCodeBtn">
                        üìã Voir mon code
                    </button>
                    <div class="cart-icon" id="cartIcon">
                        üõí
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section avec votre image -->
    <section class="hero">
        <div class="container">
            <p>NOUVELLE ARRIVAGE DE FRAPPE QUE DE LA TOP QUALITE ARRANGER</p>
            <p>Qualit√© Street ‚Ä¢ Premium ‚Ä¢ Livraison Discr√®te</p>
        </div>
    </section>

    <!-- Security Features -->
    <div class="security-features">
        <strong>üîí S√©curit√© Activ√©e:</strong>
        <ul>
            <li>‚úÖ Protection copie/colle</li>
            <li>‚úÖ Navigation priv√©e</li>
            <li>‚úÖ Aucun tracking</li>
            <li>‚úÖ Communication chiffr√©e</li>
        </ul>
    </div>

     <!-- Products Section -->
    <section class="products" id="produits">
        <div class="container">
            <h2 class="section-title">Nos <span>Produits</span> üí®</h2>
            <div class="products-grid" id="productsGrid">
                <!-- Les produits seront ajout√©s dynamiquement par JavaScript -->
            </div>
        </div>
    </section>

    <!-- Copy Section avec formulaire -->
    <section class="copy-section" id="commander">
        <div class="container">
            <div class="copy-box">
                <h2 class="section-title">Finaliser <span>Commande</span> üì≤</h2>
                
                <div class="client-form">
                    <div class="form-group">
                        <label>üë§ Votre Nom</label>
                        <input type="text" id="clientName" class="form-control" placeholder="Votre nom complet" required>
                    </div>
                    <div class="form-group">
                        <label>üìû Votre T√©l√©phone</label>
                        <input type="tel" id="clientPhone" class="form-control" placeholder="06 12 34 56 78" required>
                    </div>
                    <div class="form-group" style="position: relative;">
                        <label>üìç Votre Adresse de Livraison</label>
                        <textarea id="clientAddress" class="form-control" placeholder="Commencez √† taper votre adresse..." required rows="3"></textarea>
                        <div class="address-suggestions" id="addressSuggestions">
                            <!-- Les suggestions appara√Ætront ici -->
                        </div>
                    </div>
                </div>

                <div class="distance-info" id="distanceInfo">
                    <!-- Les infos de distance s'afficheront ici -->
                </div>
                
                <div class="copy-message" id="copyMessage">
Remplissez le formulaire et cliquez sur "G√©n√©rer la commande"
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn generate-btn" id="generateBtn">
                        üõí G√©n√©rer la commande
                    </button>
                    <button class="action-btn copy-btn" id="copyBtn">
                        üìã Copier le message
                    </button>
                    <a href="https://t.me/+3Puv4NligoE3MDQ8" class="action-btn telegram-btn" target="_blank">
                        üì± Ouvrir Telegram
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2023 Skunk Snow ‚ùÑÔ∏èüî• - Street Quality</p>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h3>Votre Panier üõí</h3>
            <button class="close-cart" id="closeCart">√ó</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Les articles du panier seront ajout√©s dynamiquement -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">0,00 ‚Ç¨</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn">Finaliser la commande ‚Ä∫</button>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmationModal">
        <div class="confirmation-modal">
            <h2>üîê CODE DE CONFIRMATION</h2>
            <div class="confirmation-code-display" id="confirmationCodeDisplay"></div>
            <p class="confirmation-instruction">
                üì∏ Faites une capture d'√©cran de ce code<br>
                Montrez-le au livreur pour confirmer votre commande
            </p>
            <button class="close-modal" id="closeModal">Fermer</button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <script>
        // ========== S√âCURIT√â INT√âGR√âE ==========
        
        // 1. Blocage clic droit et inspecteur
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            showNotification('üö´ Action d√©sactiv√©e pour la s√©curit√©');
        });

        // 2. Blocage raccourcis d√©veloppeur
        document.addEventListener('keydown', function(e) {
            // F12, Ctrl+Shift+I, Ctrl+Shift+C, etc.
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'C') ||
                (e.ctrlKey && e.key === 'u')) {
                e.preventDefault();
                showNotification('üö´ Mode d√©veloppeur d√©sactiv√©');
            }
        });

        // 3. Protection contre la copie
        document.addEventListener('copy', function(e) {
            e.preventDefault();
            showNotification('üìù Copie d√©sactiv√©e - Utilisez le bouton "Copier"');
        });

        // 4. Protection contre le drag
        document.addEventListener('dragstart', function(e) {
            e.preventDefault();
        });

        // ========== DONN√âES DES PRODUITS ==========
        const products = [
            {
                id: 1,
                name: "Neige R√©gine 0,75g",
                description: "Qualit√©, effet glace intense",
                price: 30.00,
                image: "üå®Ô∏è",
                emoji: "üå®Ô∏è"
            },
            {
                id: 2,
                name: "Neige R√©gine 1,5g",
                description: "Qualit√© , effet glac√© intense",
                price: 50.00,
                image: "üå®Ô∏è",
                emoji: "üå®Ô∏è"
            },
            {
                id: 3,
                name: "R√©gine",
                description: "R√©sine, texture √©ponge premium",
                price: 30.00,
                image: "üç´",
                emoji: "üç´"
            },
            {
                id: 4,
                name: "R√©gine ",
                description: "R√©sine qualit√©, texture premium",
                price: 50.00,
                image: "üç´",
                emoji: "üç´"
            },
            {
                id: 5,
                name: "l'Hollandaise",
                description: "Fleurs hollandaise, qualit√© terroir",
                price: 30.00,
                image: "üçÅ",
                emoji: "üçÅ"
            },
            {
                id: 6,
                name: "l'Hollandaise",
                description: "Fleurs hollandaise, qualit√© terroir",
                price: 60.00,
                image: "üçÅ",
                emoji: "üçÅ"
            }
        ];

         // ========== ADRESSES PR√âD√âFINIES ==========
        const predefinedAddresses = [
            "Traverse des Rosiers, 13014 Marseille",
            "Vieux Port, 13001 Marseille",
            "Prado, 13008 Marseille",
            "Cours Julien, 13006 Marseille",
            "La Plaine, 13005 Marseille",
            "Le Panier, 13002 Marseille",
            "Endoume, 13007 Marseille",
            "Belsunce, 13001 Marseille",
            "La Joliette, 13002 Marseille",
            "Les Catalans, 13007 Marseille"
        ];

        // ========== √âL√âMENTS DOM ==========
        const productsGrid = document.getElementById('productsGrid');
        const cartIcon = document.getElementById('cartIcon');
        const cartCount = document.getElementById('cartCount');
        const viewCodeBtn = document.getElementById('viewCodeBtn');
        const copyMessage = document.getElementById('copyMessage');
        const copyBtn = document.getElementById('copyBtn');
        const generateBtn = document.getElementById('generateBtn');
        const clientName = document.getElementById('clientName');
        const clientPhone = document.getElementById('clientPhone');
        const clientAddress = document.getElementById('clientAddress');
        const addressSuggestions = document.getElementById('addressSuggestions');
        const distanceInfo = document.getElementById('distanceInfo');
        const confirmationModal = document.getElementById('confirmationModal');
        const confirmationCodeDisplay = document.getElementById('confirmationCodeDisplay');
        const closeModal = document.getElementById('closeModal');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const cartModal = document.getElementById('cartModal');
        const closeCart = document.getElementById('closeCart');
        const cartItems = document.getElementById('cartItems');
        const cartTotal = document.getElementById('cartTotal');
        const overlay = document.getElementById('overlay');

        // ========== CONFIGURATION ==========
        const entrepotMarseille = "Traverse des Rosiers, 13014 Marseille";
        let cart = [];
        let currentOrderMessage = "";
        let confirmationNumber = "";
        let distanceKm = 0;

        // ========== STOCKAGE LOCAL ==========
        function saveToLocalStorage() {
            const orderData = {
                code: confirmationNumber,
                phone: clientPhone.value,
                address: clientAddress.value,
                timestamp: new Date().getTime()
            };
            localStorage.setItem('skunkSnowOrder', JSON.stringify(orderData));
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('skunkSnowOrder');
            if (saved) {
                const orderData = JSON.parse(saved);
                // V√©rifier si la commande a moins de 24h
                const now = new Date().getTime();
                if (now - orderData.timestamp < 24 * 60 * 60 * 1000) {
                    confirmationNumber = orderData.code;
                    viewCodeBtn.style.display = 'block';
                    return true;
                }
            }
            return false;
        }

        // ========== FONCTIONS PRINCIPALES ==========
        function displayProducts() {
            productsGrid.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">${product.image} ${product.emoji}</div>
                    <div class="product-info">
                        <h3 class="product-title">${product.name} ${product.emoji}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">${product.price.toFixed(2)} ‚Ç¨</div>
                        <button class="add-to-cart" data-id="${product.id}">Ajouter au panier üõí</button>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });

            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', addToCart);
            });
        }

        function addToCart(e) {
            const productId = parseInt(e.target.getAttribute('data-id'));
            const product = products.find(p => p.id === productId);
            
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1
                });
            }
            
            updateCart();
            showNotification(`${product.name} ajout√© au panier üõí`);
        }

        function updateCart() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p>Votre panier est vide</p>';
                cartTotal.textContent = '0,00 ‚Ç¨';
                return;
            }
            
            let totalPrice = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                totalPrice += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-image">${item.image}</div>
                    <div class="cart-item-details">
                        <div class="cart-item-title">${item.name}</div>
                        <div class="cart-item-price">${item.price.toFixed(2)} ‚Ç¨</div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                            <span class="quantity-value">${item.quantity}</span>
                            <button class="quantity-btn increase" data-id="${item.id}">+</button>
                            <span class="remove-item" data-id="${item.id}">üóëÔ∏è</span>
                        </div>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            cartTotal.textContent = `${totalPrice.toFixed(2)} ‚Ç¨`;
            
            document.querySelectorAll('.quantity-btn.decrease').forEach(button => {
                button.addEventListener('click', decreaseQuantity);
            });
            
            document.querySelectorAll('.quantity-btn.increase').forEach(button => {
                button.addEventListener('click', increaseQuantity);
            });
            
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', removeItem);
            });
        }

        function decreaseQuantity(e) {
            const productId = parseInt(e.target.getAttribute('data-id'));
            const item = cart.find(item => item.id === productId);
            
            if (item.quantity > 1) {
                item.quantity -= 1;
            } else {
                cart = cart.filter(item => item.id !== productId);
            }
            
            updateCart();
        }

        function increaseQuantity(e) {
            const productId = parseInt(e.target.getAttribute('data-id'));
            const item = cart.find(item => item.id === productId);
            
            item.quantity += 1;
            updateCart();
        }

        function removeItem(e) {
            const productId = parseInt(e.target.getAttribute('data-id'));
            cart = cart.filter(item => item.id !== productId);
            updateCart();
        }

        // ========== SUGGESTIONS D'ADRESSE ==========
        function showAddressSuggestions() {
            const input = clientAddress.value.toLowerCase();
            addressSuggestions.innerHTML = '';
            
            if (input.length < 2) {
                addressSuggestions.style.display = 'none';
                return;
            }
            
            const filteredAddresses = predefinedAddresses.filter(addr => 
                addr.toLowerCase().includes(input)
            );
            
            if (filteredAddresses.length > 0) {
                filteredAddresses.forEach(addr => {
                    const suggestion = document.createElement('div');
                    suggestion.className = 'address-suggestion';
                    suggestion.textContent = addr;
                    suggestion.addEventListener('click', function() {
                        clientAddress.value = addr;
                        addressSuggestions.style.display = 'none';
                        verifyAddress();
                    });
                    addressSuggestions.appendChild(suggestion);
                });
                addressSuggestions.style.display = 'block';
            } else {
                addressSuggestions.style.display = 'none';
            }
        }

        function calculateDistance(address) {
            // Simulation de calcul de distance depuis Traverse des Rosiers
            const distances = [2, 5, 8, 12, 15, 20, 25];
            return distances[Math.floor(Math.random() * distances.length)];
        }

        function verifyAddress() {
            const address = clientAddress.value.trim();
            
            if (address.length > 10) {
                distanceKm = calculateDistance(address);
                
                let deliveryText = "";
                if (distanceKm <= 15) {
                    deliveryText = `‚úÖ LIVRAISON GRATUITE - ${distanceKm} km de l'entrep√¥t`;
                } else if (distanceKm <= 30) {
                    deliveryText = `üöö Livraison possible - ${distanceKm} km de l'entrep√¥t`;
                } else {
                    deliveryText = `‚ùå Hors zone - ${distanceKm} km de l'entrep√¥t`;
                }
                
                distanceInfo.innerHTML = `
                    <strong>${deliveryText}</strong>
                    <p>üìç Distance depuis Traverse des Rosiers : ${distanceKm} km</p>
                `;
                distanceInfo.style.display = 'block';
            } else {
                distanceInfo.style.display = 'none';
            }
        }

        function generateOrderMessage() {
            if (cart.length === 0) {
                return "‚ùå Votre panier est vide";
            }

            const name = clientName.value.trim();
            const phone = clientPhone.value.trim();
            const address = clientAddress.value.trim();

            if (!name || !phone || !address) {
                return "‚ùå Remplissez tous les champs du formulaire";
            }

            if (distanceKm > 30) {
                return "‚ùå Hors zone de livraison (max 30km)";
            }
            
            // G√©n√©rer code confirmation
            confirmationNumber = Math.floor(Math.random() * 90) + 10;
            
            let message = "üõí **COMMANDE SKUNK SNOW** ‚ùÑÔ∏èüî•\n\n";
            message += "üì¶ **PRODUITS :**\n\n";
            
            cart.forEach(item => {
                message += `‚Ä¢ ${item.name} x${item.quantity} - ${(item.price * item.quantity).toFixed(2)}‚Ç¨\n`;
            });
            
            const total = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            message += `\nüí∞ **TOTAL : ${total.toFixed(2)}‚Ç¨**\n\n`;
            message += `üë§ **NOM :** ${name}\n`;
            message += `üìû **T√âL√âPHONE :** ${phone}\n`;
            message += `üìç **ADRESSE :** ${address}\n`;
            message += `üìè **DISTANCE :** ${distanceKm} km de l'entrep√¥t\n`;
            message += `üîê **CODE : ${confirmationNumber}**\n`;
            message += "\nMerci ! ‚ùÑÔ∏èüî•";
            
            return message;
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 20px;
                right: 20px;
                background: #8a2be2;
                color: white;
                padding: 16px;
                border-radius: 12px;
                z-index: 1001;
                text-align: center;
                font-weight: 600;
                box-shadow: 0 4px 12px rgba(138, 43, 226, 0.3);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function showConfirmationModal() {
            confirmationCodeDisplay.textContent = confirmationNumber;
            confirmationModal.classList.add('active');
        }

        // ========== √âV√âNEMENTS ==========
        generateBtn.addEventListener('click', function() {
            currentOrderMessage = generateOrderMessage();
            
            if (currentOrderMessage.startsWith('‚ùå')) {
                showNotification(currentOrderMessage);
                return;
            }
            
            copyMessage.textContent = currentOrderMessage;
            copyBtn.style.display = 'flex';
            generateBtn.textContent = 'üîÑ Reg√©n√©rer';
            
            // Sauvegarder et afficher le modal
            saveToLocalStorage();
            showConfirmationModal();
            viewCodeBtn.style.display = 'block';
            
            showNotification('‚úÖ Commande g√©n√©r√©e !');
        });

        copyBtn.addEventListener('click', function() {
            if (!currentOrderMessage) {
                showNotification('G√©n√©rez d\'abord une commande');
                return;
            }
            
            navigator.clipboard.writeText(currentOrderMessage).then(() => {
                showNotification('‚úÖ Message copi√© ! Collez sur Telegram');
            }).catch(err => {
                showNotification('‚ùå Erreur de copie');
            });
        });

        // Suggestions d'adresse
        clientAddress.addEventListener('input', function() {
            showAddressSuggestions();
            if (this.value.length > 10) {
                verifyAddress();
            }
        });

        // Fermer les suggestions quand on clique ailleurs
        document.addEventListener('click', function(e) {
            if (!clientAddress.contains(e.target) && !addressSuggestions.contains(e.target)) {
                addressSuggestions.style.display = 'none';
            }
        });

        // Modal events
        closeModal.addEventListener('click', function() {
            confirmationModal.classList.remove('active');
        });

        viewCodeBtn.addEventListener('click', function() {
            if (confirmationNumber) {
                showConfirmationModal();
            } else if (loadFromLocalStorage()) {
                showConfirmationModal();
            } else {
                showNotification('‚ùå Aucun code de commande trouv√©');
            }
        });

        cartIcon.addEventListener('click', openCartModal);
        closeCart.addEventListener('click', closeCartModal);
        overlay.addEventListener('click', closeCartModal);
        checkoutBtn.addEventListener('click', function() {
            if (cart.length === 0) {
                showNotification('Votre panier est vide üõí');
                return;
            }
            
            closeCartModal();
            document.getElementById('commander').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        });

        function openCartModal() {
            cartModal.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeCartModal() {
            cartModal.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // ========== INITIALISATION ==========
        displayProducts();
        updateCart();
        
        copyBtn.style.display = 'none';
        
        // Charger les donn√©es sauvegard√©es au d√©marrage
        loadFromLocalStorage();

        // Message de s√©curit√© au chargement
        setTimeout(() => {
            showNotification('üîí S√©curit√© activ√©e - Navigation priv√©e');
        }, 1000);
    </script>
</body>
</html>
